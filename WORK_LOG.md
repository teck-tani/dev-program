# WORK_LOG.md

> 이 파일은 Claude Code가 세션 간 작업 진행상황을 기억하기 위한 파일입니다.
> git에 커밋되므로 집/회사 어디서든 동일한 컨텍스트를 공유합니다.

======================================================================================
---

## 🎯 타이머 세계 1위 개선 로드맵 (59점 D급 → 90+ S급)

> **분석 일시**: 2026-02-11
> **경쟁사 분석**: Google Timer, pomofocus.io, vclock.com, timeanddate.com, online-stopwatch.com, flocus.io
> **현재 파일**: `src/app/[locale]/timer/TimerView.tsx` (738줄) + `timer.module.css`

---

### 현재 치명적 문제 (코드 품질)

| # | 문제 | 심각도 | 현재 상태 | 개선 방향 | 참고 |
|---|------|:------:|-----------|-----------|------|
| P0 | ~~**setInterval 타이머 드리프트**~~ | ✅ | `Date.now()` + `requestAnimationFrame` 적용 완료 | — | — |
| P1 | ~~**localStorage 미적용**~~ | ✅ | 전체 상태 영속성 구현 완료 (endTime 절대시간 저장) | — | — |
| P2 | ~~**접근성(a11y) 전무**~~ | ✅ | role="timer", aria-live, Space/R/Esc, alertdialog, 포커스 트랩 완료 | — | — |
| P3 | ~~**590줄 전체 인라인 스타일**~~ | ✅ | `timer.module.css` 분리 완료 + 다크모드 + 반응형 | — | — |
| P4 | **알람 오디오 코드 중복** | 🟡 | TimerView.tsx ↔ AlarmClient.tsx 동일 48줄 중복 | `src/utils/audioSounds.ts` 공유 유틸리티 추출 | — |

---

### Phase T1: 핵심 품질 수정 (59→75점)

> 코드 안정성 + 기본 UX를 경쟁사 수준으로 끌어올리기

| # | 항목 | 상세 | 상태 |
|---|------|------|:----:|
| 1 | **타이머 정밀도 수정** | `setInterval` → `Date.now()` + `requestAnimationFrame` 방식. 스톱워치와 동일 패턴 적용 | [x] |
| 2 | **localStorage 상태 영속성** | timeLeft, duration, isRunning, mode, pomoPhase, pomoSession, inputValues 저장/복원. 실행 중 endTime(절대시간) 저장으로 페이지 복귀 시 정확한 잔여시간 복원 | [x] |
| 3 | **키보드 단축키** | `Space` 시작/정지, `R` 리셋, `Esc` 알람 해제. 하단 힌트 UI 포함 | [x] |
| 4 | **CSS Module 분리** | 인라인 스타일 200+개 → `timer.module.css` + 다크모드 `:global(body[data-theme="dark"])` + 모바일 미디어쿼리 (`@media 375px`) | [x] |
| 5 | **접근성 보강** | `role="timer"`, `aria-live="polite"`, 모달 `role="alertdialog"` + 포커스 트랩, `aria-label` 전체, `role="tablist"` 모드 토글 | [x] |
| 6 | **알람 자동 정지** | 30초 후 자동 해제 + 카운트다운 표시 | [x] |

---

### Phase T2: 경쟁력 기능 추가 (75→85점)

> 경쟁사에 있는데 우리에게 없는 핵심 기능

| # | 항목 | 상세 | 경쟁사 | 상태 |
|---|------|------|--------|:----:|
| 7 | **인터벌/타바타 모드** | 운동/휴식 시퀀스, 라운드 반복, 타바타 프리셋(20s/10s×8). SEO에 "타바타" 언급했지만 실제 기능 없음 | HIIT Clock, Hi Timer | [x] |
| 8 | **다중 타이머** | 2~4개 동시 실행, 개별 시작/정지/리셋 | timeanddate, online-stopwatch | [x] |
| 9 | **+1분/+5분 연장 버튼** | 카운트다운 중 빠른 시간 추가 (요리/운동 시 필수) | Google Timer (+30s) | [x] |
| 10 | **볼륨 조절 슬라이더** | Web Audio gain 노드 0~100% (현재 하드코딩 0.12~0.2) | vclock, 대부분 | [x] |
| 11 | **사용자 프리셋 저장** | 자주 쓰는 타이머 시간 저장/로드/삭제 (localStorage) | pomofocus, vclock | [x] |
| 12 | **Wake Lock API** | 모바일 화면 꺼짐 방지 (`navigator.wakeLock`), iOS Safari 대응 | Google Timer, 네이티브 앱 | [x] |

---

### Phase T3: 세계 1위 차별화 (85→90+ S급)

> 경쟁사에도 없는 차별화 기능으로 1위 확정

| # | 항목 | 상세 | 경쟁사 참고 | 상태 |
|---|------|------|------------|:----:|
| 13 | **포모도로 통계/히스토리** | 일별/주별 집중시간 차트, 세션 기록, 연속 일수 스트릭 | pomofocus (유료 기능) | [x] |
| 14 | **포모도로 태스크 연동** | 할일 목록 + 예상 뽀모도로 수 추정, 태스크별 시간 추적 | pomofocus | [x] |
| 15 | **공유 타이머 링크** | `/timer?m=5&s=30` URL 파라미터로 설정 공유 | vclock | [x] |
| 16 | **배경 앰비언트 사운드** | 비소리, 카페, 화이트노이즈 (집중 모드, 볼륨 독립 조절) | flocus (핵심 차별화) | [x] |
| 17 | **음성 카운트다운** | 마지막 5초 TTS 또는 프리레코딩 (5, 4, 3, 2, 1) | HIIT 앱, Google Assistant | [x] |
| 18 | **타이머 체이닝** | 여러 타이머 순차 실행 큐 (예: 요리 — 끓이기 10분 → 뜸들이기 5분) | — (경쟁사 없음) | [x] |

---

### 경쟁사 대비 기능 비교표

| 기능 | Google | pomofocus | vclock | timeanddate | **우리 (현재)** | **우리 (목표)** |
|------|:------:|:---------:|:------:|:-----------:|:---------------:|:---------------:|
| 기본 카운트다운 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| 프리셋 버튼 | ✅ | ❌ | ✅ | ✅ | ✅ | ✅ |
| 프로그레스 링 | ✅ | ❌ | ✅ | ❌ | ✅ | ✅ |
| 포모도로 모드 | ❌ | ✅ | ❌ | ❌ | ✅ | ✅ |
| 알람 사운드 (5종) | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| 탭 제목 카운트다운 | ✅ | ✅ | ✅ | ✅ | ✅ | ✅ |
| 전체화면 | ❌ | ❌ | ✅ | ❌ | ✅ (Header) | ✅ |
| 키보드 단축키 | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |
| 상태 저장 (새로고침) | ✅ | ✅ | ✅ | ❌ | ✅ | ✅ |
| 다중 타이머 | ❌ | ❌ | ❌ | ✅ | ✅ | ✅ |
| 인터벌/타바타 | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |
| 볼륨 조절 | ❌ | ✅ | ✅ | ❌ | ✅ | ✅ |
| +1분 연장 | ✅(+30s) | ❌ | ❌ | ❌ | ✅ | ✅ |
| 포모도로 통계 | ❌ | ✅(유료) | ❌ | ❌ | ✅(무료) | ✅(무료) |
| 태스크 연동 | ❌ | ✅ | ❌ | ❌ | ✅ | ✅ |
| 앰비언트 사운드 | ❌ | ❌ | ❌ | ❌ | ✅ | ✅ |
| Wake Lock | ✅ | ❌ | ❌ | ❌ | ✅ | ✅ |
| 공유 링크 | ❌ | ❌ | ✅ | ❌ | ✅ | ✅ |

**Phase T1~T3 완료 시 예상: 18개 기능 중 16개 보유 → 단일 경쟁사 최대 8개 대비 2배**

---

### 개선 요약

| Phase | 점수 | 항목수 | 핵심 효과 |
|-------|:----:|:------:|-----------|
| T1 | 59→75 | 6개 | 드리프트 수정, 상태 저장, 접근성, CSS 분리 |
| T2 | 75→85 | 6개 | 인터벌/타바타, 다중타이머, 볼륨, Wake Lock |
| T3 | 85→90+ | 6개 | 포모도로 통계, 앰비언트, 태스크, 체이닝 |

---
*마지막 업데이트: 2026-02-12 (Phase T1~T3 전체 완료 — 18개 항목 모두 구현, 59점 D급 → 90+ S급 달성)*

======================================================================================